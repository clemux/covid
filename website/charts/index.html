<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="static/main.css">
    <script src="static/chart.js"></script>
</head>
<body>
    <canvas id="chart" width="400" height="400"></canvas>
</body>
</html>
<script>
    function updateChart(data) {
        const ctx = document.getElementById('chart');
        const myChart = new Chart(ctx, {
            data: {
                datasets: [{
                    data: data,
                    type: 'bar',
                    label: 'New cases'
                }]
            },
            options: {
                parsing: {
                    xAxisKey: 'date',
                    yAxisKey: 'positive_tests'
                }
            }
        })
        myChart.canvas.parentNode.style.height = '128px';
    }
    apiData = fetch('data?start=2022-01-01')
          .then(response => response.json())
          .then(data => updateChart(data))

</script>